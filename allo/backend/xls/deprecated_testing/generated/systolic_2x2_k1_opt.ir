package systolic_2x2_k1

file_number 0 "/home/nvs26/allo-xls-backend/allo/backend/xls/tests/generated/systolic_2x2_k1.x"

chan systolic_2x2_k1__a_row_0(bits[32], id=0, kind=streaming, ops=receive_only, flow_control=ready_valid, strictness=proven_mutually_exclusive)
chan systolic_2x2_k1__a_row_1(bits[32], id=1, kind=streaming, ops=receive_only, flow_control=ready_valid, strictness=proven_mutually_exclusive)
chan systolic_2x2_k1__b_col_0(bits[32], id=2, kind=streaming, ops=receive_only, flow_control=ready_valid, strictness=proven_mutually_exclusive)
chan systolic_2x2_k1__b_col_1(bits[32], id=3, kind=streaming, ops=receive_only, flow_control=ready_valid, strictness=proven_mutually_exclusive)
chan systolic_2x2_k1__c_result(bits[32][2][2], id=4, kind=streaming, ops=send_only, flow_control=ready_valid, strictness=proven_mutually_exclusive)
chan systolic_2x2_k1__a_fifo_0_0(bits[32], id=5, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__a_fifo_0_1(bits[32], id=6, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__a_fifo_0_2(bits[32], id=7, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__a_fifo_1_0(bits[32], id=8, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__a_fifo_1_1(bits[32], id=9, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__a_fifo_1_2(bits[32], id=10, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__b_fifo_0_0(bits[32], id=11, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__b_fifo_0_1(bits[32], id=12, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__b_fifo_0_2(bits[32], id=13, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__b_fifo_1_0(bits[32], id=14, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__b_fifo_1_1(bits[32], id=15, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__b_fifo_1_2(bits[32], id=16, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__c_out_0_0(bits[32], id=17, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__c_out_0_1(bits[32], id=18, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__c_out_1_0(bits[32], id=19, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)
chan systolic_2x2_k1__c_out_1_1(bits[32], id=20, kind=streaming, ops=send_receive, flow_control=ready_valid, strictness=proven_mutually_exclusive, fifo_depth=1, bypass=true, register_push_outputs=true, register_pop_outputs=false)

top proc __systolic_2x2_k1__SystolicArray_0_next() {
  tok: token = after_all(id=8)
  receive.278: (token, bits[32]) = receive(tok, channel=systolic_2x2_k1__a_row_0, id=278)
  tok__1: token = tuple_index(receive.278, index=0, id=11, pos=[(0,116,9)])
  a_0_0: bits[32] = tuple_index(receive.278, index=1, id=12, pos=[(0,116,14)])
  tok__2: token = send(tok__1, a_0_0, channel=systolic_2x2_k1__a_fifo_0_0, id=279)
  receive.280: (token, bits[32]) = receive(tok__2, channel=systolic_2x2_k1__a_row_1, id=280)
  tok__3: token = tuple_index(receive.280, index=0, id=16, pos=[(0,118,9)])
  a_1_0: bits[32] = tuple_index(receive.280, index=1, id=17, pos=[(0,118,14)])
  tok__4: token = send(tok__3, a_1_0, channel=systolic_2x2_k1__a_fifo_1_0, id=281)
  receive.282: (token, bits[32]) = receive(tok__4, channel=systolic_2x2_k1__b_col_0, id=282)
  tok__5: token = tuple_index(receive.282, index=0, id=21, pos=[(0,120,9)])
  b_0_0: bits[32] = tuple_index(receive.282, index=1, id=22, pos=[(0,120,14)])
  tok__6: token = send(tok__5, b_0_0, channel=systolic_2x2_k1__b_fifo_0_0, id=283)
  receive.284: (token, bits[32]) = receive(tok__6, channel=systolic_2x2_k1__b_col_1, id=284)
  tok__7: token = tuple_index(receive.284, index=0, id=26, pos=[(0,122,9)])
  b_0_1: bits[32] = tuple_index(receive.284, index=1, id=27, pos=[(0,122,14)])
  tok__8: token = send(tok__7, b_0_1, channel=systolic_2x2_k1__b_fifo_1_0, id=285)
  receive.286: (token, bits[32]) = receive(tok__8, channel=systolic_2x2_k1__c_out_0_0, id=286)
  tok__9: token = tuple_index(receive.286, index=0, id=31, pos=[(0,124,9)])
  receive.287: (token, bits[32]) = receive(tok__9, channel=systolic_2x2_k1__c_out_0_1, id=287)
  tok__10: token = tuple_index(receive.287, index=0, id=35, pos=[(0,125,9)])
  receive.288: (token, bits[32]) = receive(tok__10, channel=systolic_2x2_k1__c_out_1_0, id=288)
  tok__11: token = tuple_index(receive.288, index=0, id=39, pos=[(0,126,9)])
  receive.289: (token, bits[32]) = receive(tok__11, channel=systolic_2x2_k1__c_out_1_1, id=289)
  tok__12: token = tuple_index(receive.289, index=0, id=43, pos=[(0,127,9)])
  receive.290: (token, bits[32]) = receive(tok__12, channel=systolic_2x2_k1__a_fifo_0_2, id=290)
  tok__13: token = tuple_index(receive.290, index=0, id=47, pos=[(0,128,9)])
  receive.291: (token, bits[32]) = receive(tok__13, channel=systolic_2x2_k1__a_fifo_1_2, id=291)
  tok__14: token = tuple_index(receive.291, index=0, id=51, pos=[(0,129,9)])
  receive.292: (token, bits[32]) = receive(tok__14, channel=systolic_2x2_k1__b_fifo_0_2, id=292)
  tok__15: token = tuple_index(receive.292, index=0, id=55, pos=[(0,130,9)])
  c_0_0: bits[32] = tuple_index(receive.286, index=1, id=32, pos=[(0,124,14)])
  c_0_1: bits[32] = tuple_index(receive.287, index=1, id=36, pos=[(0,125,14)])
  c_1_0: bits[32] = tuple_index(receive.288, index=1, id=40, pos=[(0,126,14)])
  c_1_1: bits[32] = tuple_index(receive.289, index=1, id=44, pos=[(0,127,14)])
  receive.293: (token, bits[32]) = receive(tok__15, channel=systolic_2x2_k1__b_fifo_1_2, id=293)
  array.61: bits[32][2] = array(c_0_0, c_0_1, id=61, pos=[(0,132,13)])
  array.62: bits[32][2] = array(c_1_0, c_1_1, id=62, pos=[(0,132,29)])
  tok__16: token = tuple_index(receive.293, index=0, id=59, pos=[(0,131,9)])
  C: bits[32][2][2] = array(array.61, array.62, id=63, pos=[(0,132,12)])
  tok__17: token = send(tok__16, C, channel=systolic_2x2_k1__c_result, id=294)
}

proc __systolic_2x2_k1__SystolicArray__PE_0__1_next() {
  after_all.73: token = after_all(id=73)
  receive.295: (token, bits[32]) = receive(after_all.73, channel=systolic_2x2_k1__a_fifo_0_0, id=295)
  tok: token = tuple_index(receive.295, index=0, id=76, pos=[(0,22,9)])
  receive.296: (token, bits[32]) = receive(tok, channel=systolic_2x2_k1__b_fifo_0_0, id=296)
  tok__1: token = tuple_index(receive.296, index=0, id=80, pos=[(0,23,9)])
  a: bits[32] = tuple_index(receive.295, index=1, id=77, pos=[(0,22,14)])
  tok__2: token = send(tok__1, a, channel=systolic_2x2_k1__a_fifo_0_1, id=297)
  b: bits[32] = tuple_index(receive.296, index=1, id=81, pos=[(0,23,14)])
  tok__3: token = send(tok__2, b, channel=systolic_2x2_k1__b_fifo_0_1, id=298)
  prod: bits[32] = umul(a, b, id=82, pos=[(0,24,15)])
  send.482: token = send(tok__3, prod, channel=systolic_2x2_k1__c_out_0_0, id=482)
}

proc __systolic_2x2_k1__SystolicArray__PE_1__1_next() {
  after_all.105: token = after_all(id=105)
  receive.299: (token, bits[32]) = receive(after_all.105, channel=systolic_2x2_k1__a_fifo_0_1, id=299)
  tok: token = tuple_index(receive.299, index=0, id=108, pos=[(0,22,9)])
  receive.300: (token, bits[32]) = receive(tok, channel=systolic_2x2_k1__b_fifo_1_0, id=300)
  tok__1: token = tuple_index(receive.300, index=0, id=112, pos=[(0,23,9)])
  a: bits[32] = tuple_index(receive.299, index=1, id=109, pos=[(0,22,14)])
  tok__2: token = send(tok__1, a, channel=systolic_2x2_k1__a_fifo_0_2, id=301)
  b: bits[32] = tuple_index(receive.300, index=1, id=113, pos=[(0,23,14)])
  tok__3: token = send(tok__2, b, channel=systolic_2x2_k1__b_fifo_1_1, id=302)
  prod: bits[32] = umul(a, b, id=114, pos=[(0,24,15)])
  send.483: token = send(tok__3, prod, channel=systolic_2x2_k1__c_out_0_1, id=483)
}

proc __systolic_2x2_k1__SystolicArray__PE_2__1_next() {
  after_all.137: token = after_all(id=137)
  receive.303: (token, bits[32]) = receive(after_all.137, channel=systolic_2x2_k1__a_fifo_1_0, id=303)
  tok: token = tuple_index(receive.303, index=0, id=140, pos=[(0,22,9)])
  receive.304: (token, bits[32]) = receive(tok, channel=systolic_2x2_k1__b_fifo_0_1, id=304)
  tok__1: token = tuple_index(receive.304, index=0, id=144, pos=[(0,23,9)])
  a: bits[32] = tuple_index(receive.303, index=1, id=141, pos=[(0,22,14)])
  tok__2: token = send(tok__1, a, channel=systolic_2x2_k1__a_fifo_1_1, id=305)
  b: bits[32] = tuple_index(receive.304, index=1, id=145, pos=[(0,23,14)])
  tok__3: token = send(tok__2, b, channel=systolic_2x2_k1__b_fifo_0_2, id=306)
  prod: bits[32] = umul(a, b, id=146, pos=[(0,24,15)])
  send.484: token = send(tok__3, prod, channel=systolic_2x2_k1__c_out_1_0, id=484)
}

proc __systolic_2x2_k1__SystolicArray__PE_3__1_next() {
  after_all.169: token = after_all(id=169)
  receive.307: (token, bits[32]) = receive(after_all.169, channel=systolic_2x2_k1__a_fifo_1_1, id=307)
  tok: token = tuple_index(receive.307, index=0, id=172, pos=[(0,22,9)])
  receive.308: (token, bits[32]) = receive(tok, channel=systolic_2x2_k1__b_fifo_1_1, id=308)
  tok__1: token = tuple_index(receive.308, index=0, id=176, pos=[(0,23,9)])
  a: bits[32] = tuple_index(receive.307, index=1, id=173, pos=[(0,22,14)])
  tok__2: token = send(tok__1, a, channel=systolic_2x2_k1__a_fifo_1_2, id=309)
  b: bits[32] = tuple_index(receive.308, index=1, id=177, pos=[(0,23,14)])
  tok__3: token = send(tok__2, b, channel=systolic_2x2_k1__b_fifo_1_2, id=310)
  prod: bits[32] = umul(a, b, id=178, pos=[(0,24,15)])
  send.485: token = send(tok__3, prod, channel=systolic_2x2_k1__c_out_1_1, id=485)
}
